{"version":3,"sources":["Game.js"],"names":["Player","require","cc","Class","extends","Component","properties","player","default","type","startBtn","Node","timerDisplay","Label","maxTime","onLoad","timer","onStartGame","enabled","x","startMoveAt","v2","window","innerWidth","innerHeight","update","dt","gameOver","addTimer","string","toFixed","stopMove"],"mappings":";;;;;;AAAA,IAAMA,SAASC,QAAQ,QAAR,CAAf;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAQ;AACJC,qBAAS,IADL;AAEJC,kBAAMT;AAFF,SADA;AAKRU,kBAAU;AACNF,qBAAS,IADH;AAENC,kBAAMP,GAAGS;AAFH,SALF;AASRC,sBAAc;AACVJ,qBAAS,IADC;AAEVC,kBAAMP,GAAGW;AAFC,SATN;AAaRC,iBAAS;AAbD,KAHP;;AAmBL;;AAEAC,UArBK,oBAqBK;AACN,aAAKC,KAAL,GAAa,CAAb;AACH,KAvBI;;;AAyBLC,iBAAa,uBAAY;AACrB,aAAKC,OAAL,GAAe,IAAf;AACA,aAAKF,KAAL,GAAa,CAAb;AACA,aAAKN,QAAL,CAAcS,CAAd,GAAkB,IAAlB;AACA,aAAKZ,MAAL,CAAYa,WAAZ,CAAwBlB,GAAGmB,EAAH,CAAM,CAACC,OAAOC,UAAR,GAAqB,CAA3B,EAA8BD,OAAOE,WAAP,GAAqB,CAAnD,CAAxB;AACH,KA9BI;;AAgCLC,YAAQ,gBAAUC,EAAV,EAAc;AAClB;AACA,YAAI,KAAKV,KAAL,GAAa,KAAKF,OAAtB,EAA+B;AAC3B,iBAAKa,QAAL;AACA,iBAAKT,OAAL,GAAe,KAAf,CAF2B,CAEH;AACxB;AACH;AACD,aAAKF,KAAL,IAAcU,EAAd;AACA,aAAKE,QAAL;AACH,KAzCI;;AA2CLA,cAAU,oBAAY;AAClB;AACA,aAAKhB,YAAL,CAAkBiB,MAAlB,GAA2B,YAAY,CAAC,KAAKf,OAAL,GAAe,KAAKE,KAArB,EAA4Bc,OAA5B,CAAoC,CAApC,CAAvC;AACH,KA9CI;;AAgDLH,cAAU,oBAAY;AAClB,aAAKpB,MAAL,CAAYW,OAAZ,GAAsB,KAAtB;AACA,aAAKX,MAAL,CAAYwB,QAAZ;AACA,aAAKrB,QAAL,CAAcS,CAAd,GAAkB,CAAlB;AACH;AApDI,CAAT","file":"Game.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["const Player = require('Player');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        player: {\n            default: null,\n            type: Player\n        },\n        startBtn: {\n            default: null,\n            type: cc.Node\n        },\n        timerDisplay: {\n            default: null,\n            type: cc.Label\n        },\n        maxTime: 0\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.timer = 0;\n    },\n\n    onStartGame: function () {\n        this.enabled = true;\n        this.timer = 0;\n        this.startBtn.x = 3000;\n        this.player.startMoveAt(cc.v2(-window.innerWidth / 2, window.innerHeight / 2));\n    },\n\n    update: function (dt) {\n        // 每帧更新计时器\n        if (this.timer > this.maxTime) {\n            this.gameOver();\n            this.enabled = false;   // disable this to avoid gameOver() repeatedly\n            return;\n        }\n        this.timer += dt;\n        this.addTimer();\n    },\n\n    addTimer: function () {\n        // 更新 scoreDisplay Label 的文字\n        this.timerDisplay.string = 'Timer: ' + (this.maxTime - this.timer).toFixed(2);\n    },\n\n    gameOver: function () {\n        this.player.enabled = false;\n        this.player.stopMove();\n        this.startBtn.x = 0;\n    }\n});\n"]}